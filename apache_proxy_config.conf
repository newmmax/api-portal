# Configuração Apache para FC Data API
# Adicionar dentro do VirtualHost HTTPS de conexao.artesanalfarmacia.com.br

# Proxy para FC Data API
# Certifique-se que os módulos necessários estão habilitados:
# - mod_proxy
# - mod_proxy_http
# - mod_headers

# Configuração do proxy reverso para a API
<Location /services/api1>
    # Proxy para o servidor local da API (PORTA CORRIGIDA!)
    ProxyPass http://localhost:8089/services/api1
    ProxyPassReverse http://localhost:8089/services/api1
    
    # Headers importantes
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-Port "443"
    
    # Permitir métodos HTTP necessários
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header set Access-Control-Allow-Headers "Authorization, Content-Type"
    
    # Timeout para queries longas
    ProxyTimeout 300
</Location>

# Se precisar de WebSocket (futuro)
# <Location /services/api1/ws>
#     ProxyPass ws://localhost:8080/services/api1/ws
#     ProxyPassReverse ws://localhost:8080/services/api1/ws
# </Location>
